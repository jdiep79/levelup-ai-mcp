## ğŸ”— Scraping LinkedIn Data in LangChain: Building the Icebreaker App

---

### ğŸ§  **Intro**

In this extensive session, Eden walks through how to integrate **LinkedIn profile scraping** into your LangChain-powered Icebreaker app. Youâ€™ll use a third-party API, **Scrapin.io**, to extract professional info from LinkedIn and inject it into your LLM prompt â€” unlocking a more personalized and insightful user experience.

---

### ğŸ“ **What You'll Learn**

- âœ… How to use **Scrapin.io** (a paid API with free tier) to scrape LinkedIn data
- âœ… How to set up a **mock flow** using **GitHub Gist** to avoid burning API credits ğŸ’°
- âœ… How to load and clean API responses to save tokens ğŸ”
- âœ… How to create a `linkedin.py` utility inside a `third_parties/` module
- âœ… How to plug that data into your **LangChain prompt**

---

### ğŸ§© **Step-by-Step Breakdown**

#### 1ï¸âƒ£ Create `third_parties/linkedin.py`

- Create a `scrape_linkedin_profile(linkedin_profile_url, mock=False)` function

- Import:

  ```python
  import os
  import requests
  from dotenv import load_dotenv
  ```

- Load env variables and define:

  - `SCRAPIN_API_KEY`
  - API endpoint: `https://api.scrapin.io/enrichment/profile`

#### 2ï¸âƒ£ ğŸ§ª Use Scrapin.io

- Send API GET request with:

  ```python
  params = {
    "apikey": os.getenv("SCRAPIN_API_KEY"),
    "LinkedinUrl": linkedin_profile_url
  }
  ```

- Example response structure:

  ```json
  {
    "success": true,
    "person": { ... },  // Target data
    "credits": 49
  }
  ```

#### 3ï¸âƒ£ ğŸ§ª Use GitHub Gist for Mocking

- Copy one real response and paste into a public Gist:

  - Example: `https://gist.githubusercontent.com/username/raw/eden-marco-scrapin.json`

- Access it in your function when `mock=True`

- Call:

  ```python
  requests.get(GIST_URL).json()
  ```

âœ… Perfect for:

- Testing
- Saving API calls
- Reproducibility

---

### ğŸ§¹ Clean the Payload to Save Tokens

- Token limits matter!

![alt text](image.png)

- Remove **empty fields** like:

  - Empty dicts
  - Empty strings
  - Nulls

- Eden adds a utility snippet that cleans the JSON before itâ€™s sent to the LLM.

âœ… Prevents:

- Token bloat
- Higher costs
- LLM token limit overflows

---

### ğŸ§ª Final Integration in `icebreaker.py`

- Replace the hardcoded Elon Musk data

- Import the function:

  ```python
  from third_parties.linkedin import scrape_linkedin_profile
  ```

- Fetch actual data:

  ```python
  linkedin_data = scrape_linkedin_profile("https://linkedin.com/in/edenmarco")
  ```

- Inject into LangChain prompt input:

  ```python
  chain.invoke({
    "information": linkedin_data
  })
  ```

---

### ğŸ’» Example `.env` Setup

```env
SCRAPIN_API_KEY=sk-xxxxxxxxxxxxxxxx
```

ğŸ“Œ Case-sensitive keys like `"LinkedinUrl"` and `"apikey"` are required exactly as written!

---

### ğŸ§ª Debugging & Development Flow

- âœ… Add breakpoints
- âœ… Print JSON response before/after cleaning
- âœ… Use mock mode for unlimited local runs

---

### ğŸ”„ Legacy Note

- The course initially used **Proxycurl**, but it was replaced due to:

  - Fewer free credits (10)
  - API inconsistency
  - Community feedback

Now Scrapin.io offers:

- ğŸ”¥ 50 free credits (with Edenâ€™s coupon)
- âœ… Simpler API
- ğŸ›¡ï¸ Better reliability

---

### ğŸ”‘ Key Concepts Recap

| Concept         | Purpose                               | Emoji |
| --------------- | ------------------------------------- | ----- |
| `Scrapin.io`    | LinkedIn scraping API                 | ğŸ”—    |
| `mock=True`     | Use static mock data                  | ğŸ§ª    |
| GitHub Gist     | Host your mock LinkedIn response      | ğŸ“    |
| JSON Cleanup    | Reduce token cost & improve LLM focus | ğŸ§¹    |
| LangChain Chain | Inject structured data into prompt    | â›“ï¸    |

---

### ğŸ› ï¸ Pro Tips

- ğŸ”’ Never hardcode API keys; use `.env` + `dotenv`
- ğŸ“ˆ Clean your payload to avoid hitting LLM token limits
- ğŸ” Use mock mode when possible â€” especially for debugging/testing

---

### ğŸš€ Whatâ€™s Next?

You're now ready to move beyond static prompt apps!
In the **next video**, Eden introduces **LangChain Agents** â€” and the Icebreaker app will become dynamic and intelligent ğŸ§ âš¡

If you want the exact code:

- Visit the course repo and checkout branch:

  ```
  2-linkedin-scraping-finish
  ```

Let's keep building! ğŸ› ï¸ğŸ”¥

### Resources

[Mastering Token Limits and Memory in ChatGPT and other Large Language Models](https://medium.com/@russkohn/mastering-ai-token-limits-and-memory-ce920630349a)
[Ice Breaker Github Repo](https://github.com/emarco177/ice_breaker)
